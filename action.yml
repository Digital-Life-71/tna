name: 'Telegram Message Notify Actions'
description: 'TNA —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —É—Å–∫–æ—Ä—è—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é'
author: 'Digital-Life-71'
inputs:
  TELEGRAM_TOKEN:
    description: '–¢–æ–∫–µ–Ω Telegram'
    required: true
    default: ''
  TELEGRAM_CHAT_ID:
    description: 'ID —á–∞—Ç–∞ Telegram'
    required: true
    default: ''
  TELEGRAM_MESSAGE:
    description: '–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏'
    required: true
    default: |
      üìù Commit: ${{ github.event.head_commit.message }}
      ‚ö†Ô∏è Branch: ${{ github.ref_name }}
      üë§ Author: ${{ github.actor }}
      üìÖ Date: ${{ github.event.head_commit.timestamp }}
      üìÇ Repository: ${{ github.repository }}
      üîó Commit URL: ${{ github.event.head_commit.url }}
      üÜî Commit ID: ${{ github.sha }}
      üè∑Ô∏è Repository Owner: ${{ github.repository_owner }}
      üìõ Repository Name: ${{ github.event.repository.name }}
  BUTTON_TEXT:
    description: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏'
    required: true
    default: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å'
  BUTTON_URL:
    description: 'URL –∫–Ω–æ–ø–∫–∏'
    required: true
    default: 'https://github.com/${{ github.repository }}/commit/${{ github.sha }}'
  DISABLE_NOTIFICATION:
    description: '–û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è'
    required: false
    default: 'true'
  COMMIT:
    description: '–ö–æ–º–º–∏—Ç'
    required: false
    default: ''
  BRANCH:
    description: '–í–µ—Ç–∫–∞'
    required: false
    default: ''
  AUTHOR:
    description: '–ê–≤—Ç–æ—Ä'
    required: false
    default: ''
  DATE:
    description: '–î–∞—Ç–∞ –∫–æ–º–º–∏—Ç–∞'
    required: false
    default: ''
  REPOSITORY:
    description: '–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π'
    required: false
    default: ''
  COMMIT_URL:
    description: 'URL –∫–æ–º–º–∏—Ç–∞'
    required: false
    default: ''
  COMMIT_ID:
    description: 'ID –∫–æ–º–º–∏—Ç–∞'
    required: false
    default: ''
  REPOSITORY_OWNER:
    description: '–í–ª–∞–¥–µ–ª–µ—Ü —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è'
    required: false
    default: ''
  REPOSITORY_NAME:
    description: '–ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è'
    required: false
    default: ''
runs:
  using: 'composite'
  steps:
    - name: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram # –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–≥–∞
      shell: bash # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–æ–ª–æ—á–∫–∏ bash
      env:
        TELEGRAM_TOKEN: ${{ inputs.TELEGRAM_TOKEN }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è TELEGRAM_TOKEN
        TELEGRAM_CHAT_ID: ${{ inputs.TELEGRAM_CHAT_ID }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è TELEGRAM_CHAT_ID
        TELEGRAM_MESSAGE: ${{ inputs.TELEGRAM_MESSAGE }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è TELEGRAM_MESSAGE
        BUTTON_TEXT: ${{ inputs.BUTTON_TEXT }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è BUTTON_TEXT
        BUTTON_URL: ${{ inputs.BUTTON_URL }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è BUTTON_URL
        DISABLE_NOTIFICATION: ${{ inputs.DISABLE_NOTIFICATION }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è DISABLE_NOTIFICATION
        COMMIT: ${{ inputs.COMMIT }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è COMMIT
        BRANCH: ${{ inputs.BRANCH }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è BRANCH
        AUTHOR: ${{ inputs.AUTHOR }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è AUTHOR
        DATE: ${{ inputs.DATE }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è DATE
        REPOSITORY: ${{ inputs.REPOSITORY }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è REPOSITORY
        COMMIT_URL: ${{ inputs.COMMIT_URL }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è COMMIT_URL
        COMMIT_ID: ${{ inputs.COMMIT_ID }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è COMMIT_ID
        REPOSITORY_OWNER: ${{ inputs.REPOSITORY_OWNER }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è REPOSITORY_OWNER
        REPOSITORY_NAME: ${{ inputs.REPOSITORY_NAME }} # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è REPOSITORY_NAME
      run: |
        set -e
        echo "–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram..."
        PAYLOAD="chat_id=${TELEGRAM_CHAT_ID}&text=${TELEGRAM_MESSAGE}&disable_notification=${DISABLE_NOTIFICATION}&reply_markup={\"inline_keyboard\":[[{\"text\":\"${BUTTON_TEXT}\",\"url\":\"${BUTTON_URL}\"}]]}"
        curl -v -X POST "https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage" -d "${PAYLOAD}"
